#!/opt/perl/bin/perl
use strict;
use warnings;
use feature ':5.10';
use Storable qw( store retrieve );
use File::Basename qw( dirname );
use lib dirname( __FILE__ );
use TM qw( size );

my $in_edge  = "$ARGV[0].edge";
my $out_name = "$ARGV[0].name";

say "Read $in_edge (@{[ size( -s $in_edge ) ]})";
my $edge = retrieve( $in_edge );

my %name = (
    map {; $_ => $_ }
    @{ $edge->{root} }
);

store( \%name, $out_name );
say "Wrote $out_name (@{[ size( -s $out_name ) ]})";
